plugins => { geoip => {
    maps => {
        generic-map => {
            geoip2_db => /usr/share/GeoIP/GeoIP2-City.mmdb
            datacenters => [eqiad esams ulsfo codfw]
            map => {
                # use ISO 3166-2 official names
                AF => [esams, eqiad], # ESAMS-EQIAD
                AS => {
                    AE => [esams, ulsfo], # ESAMS-ULSFO # United Arab Emirates
                    AF => [eqiad       ], # Afghanistan
                    AM => [esams, ulsfo], # ESAMS-ULSFO # Armenia
                    AP => [ulsfo, eqiad], # Asia-Pacific region (misc)
                    AZ => [esams, ulsfo], # ESAMS-ULSFO # Azerbaijan
                    BD => [ulsfo, eqiad], # Bangladesh
                    BH => [esams, ulsfo], # ESAMS-ULSFO # Bahrain
                    BN => [ulsfo, eqiad], # Brunei Darussalam
                    BT => [ulsfo, eqiad], # Bhutan
                    CC => [ulsfo, eqiad], # Cocos (Keeling) Islands
                    CN => [ulsfo, eqiad], # China
                    CX => [ulsfo, eqiad], # Christmas Island
                    CY => [esams, ulsfo], # ESAMS-ULSFO # Cyprus
                    GE => [esams, ulsfo], # ESAMS-ULSFO # Georgia
                    HK => [ulsfo, eqiad], # Hong Kong
                    ID => [ulsfo, eqiad], # Indonesia
                    IL => [esams, ulsfo], # ESAMS-ULSFO # Israel
                    IN => [eqiad       ], # India
                    IO => [eqiad       ], # British Indian Ocean Territory
                    IQ => [esams, ulsfo], # ESAMS-ULSFO # Iraq
                    IR => [esams, ulsfo], # ESAMS-ULSFO # Iran (Islamic Republic of)
                    JO => [esams, ulsfo], # ESAMS-ULSFO # Jordan
                    JP => [ulsfo, eqiad], # Japan
                    KG => [eqiad       ], # Kyrgyzstan
                    KH => [ulsfo, eqiad], # Cambodia
                    KP => [ulsfo, eqiad], # Korea, Democratic People's Republic of
                    KR => [ulsfo, eqiad], # Korea, Republic of
                    KW => [esams, ulsfo], # ESAMS-ULSFO # Kuwait
                    KZ => [eqiad       ], # Kazakhstan
                    LA => [ulsfo, eqiad], # Lao People's Democratic Republic
                    LB => [esams, ulsfo], # ESAMS-ULSFO # Lebanon
                    LK => [eqiad       ], # Sri Lanka
                    MM => [ulsfo, eqiad], # Myanmar
                    MN => [ulsfo, eqiad], # Mongolia
                    MO => [ulsfo, eqiad], # Macao
                    MV => [ulsfo, eqiad], # Maldives
                    MY => [ulsfo, eqiad], # Malaysia
                    NP => [ulsfo, eqiad], # Nepal
                    OM => [esams, ulsfo], # ESAMS-ULSFO # Oman
                    PH => [ulsfo, eqiad], # Philippines
                    PK => [eqiad       ], # Pakistan
                    PS => [esams, ulsfo], # ESAMS-ULSFO # Palestine, State of
                    QA => [esams, ulsfo], # ESAMS-ULSFO # Qatar
                    SA => [esams, ulsfo], # ESAMS-ULSFO # Saudi Arabia
                    SG => [ulsfo, eqiad], # Singapore
                    SY => [esams, ulsfo], # ESAMS-ULSFO # Syrian Arab Republic
                    TH => [ulsfo, eqiad], # Thailand
                    TJ => [eqiad       ], # Tajikistan
                    TL => [ulsfo, eqiad], # Timor-Leste
                    TM => [eqiad       ], # Turkmenistan
                    TW => [ulsfo, eqiad], # Taiwan, Province of China
                    UZ => [eqiad       ], # Uzbekistan
                    VN => [ulsfo, eqiad], # Viet Nam
                    YE => [esams, ulsfo], # ESAMS-ULSFO # Yemen
                },
                EU => {
                    AD => [esams, eqiad], # ESAMS-EQIAD # Andorra
                    AL => [esams, eqiad], # ESAMS-EQIAD # Albania
                    AT => [esams, eqiad], # ESAMS-EQIAD # Austria
                    AX => [esams, eqiad], # ESAMS-EQIAD # Ã…land Islands
                    BA => [esams, eqiad], # ESAMS-EQIAD # Bosnia and Herzegowina
                    BE => [esams, eqiad], # ESAMS-EQIAD # Belgium
                    BG => [esams, eqiad], # ESAMS-EQIAD # Bulgaria
                    BY => [esams, eqiad], # ESAMS-EQIAD # Belarus
                    CH => [esams, eqiad], # ESAMS-EQIAD # Switzerland
                    CZ => [esams, eqiad], # ESAMS-EQIAD # Czech Republic
                    DE => [esams, eqiad], # ESAMS-EQIAD # Germany
                    DK => [esams, eqiad], # ESAMS-EQIAD # Denmark
                    EE => [esams, eqiad], # ESAMS-EQIAD # Estonia
                    ES => [esams, eqiad], # ESAMS-EQIAD # Spain
                    EU => [esams, eqiad], # ESAMS-EQIAD # Europe region (misc)
                    FI => [esams, eqiad], # ESAMS-EQIAD # Finland
                    FO => [esams, eqiad], # ESAMS-EQIAD # Faroe Islands
                    FR => [esams, eqiad], # ESAMS-EQIAD # France
                    GB => [esams, eqiad], # ESAMS-EQIAD # United Kingdom
                    GG => [esams, eqiad], # ESAMS-EQIAD # Guernsey
                    GI => [esams, eqiad], # ESAMS-EQIAD # Gibraltar
                    GR => [esams, eqiad], # ESAMS-EQIAD # Greece
                    HR => [esams, eqiad], # ESAMS-EQIAD # Croatia (local name Hrvatska)
                    HU => [esams, eqiad], # ESAMS-EQIAD # Hungary
                    IE => [esams, eqiad], # ESAMS-EQIAD # Ireland
                    IM => [esams, eqiad], # ESAMS-EQIAD # Isle of Man
                    IS => [esams, eqiad], # ESAMS-EQIAD # Iceland
                    IT => [esams, eqiad], # ESAMS-EQIAD # Italy
                    JE => [esams, eqiad], # ESAMS-EQIAD # Jersey
                    LI => [esams, eqiad], # ESAMS-EQIAD # Liechtenstein
                    LT => [esams, eqiad], # ESAMS-EQIAD # Lithuania
                    LU => [esams, eqiad], # ESAMS-EQIAD # Luxembourg
                    LV => [esams, eqiad], # ESAMS-EQIAD # Latvia
                    MC => [esams, eqiad], # ESAMS-EQIAD # Monaco
                    MD => [esams, eqiad], # ESAMS-EQIAD # Moldova, Republic of
                    ME => [esams, eqiad], # ESAMS-EQIAD # Montenegro
                    MK => [esams, eqiad], # ESAMS-EQIAD # Macedonia, the Former Yugoslav Republic of
                    MT => [esams, eqiad], # ESAMS-EQIAD # Malta
                    NL => [esams, eqiad], # ESAMS-EQIAD # Netherlands
                    NO => [esams, eqiad], # ESAMS-EQIAD # Norway
                    PL => [esams, eqiad], # ESAMS-EQIAD # Poland
                    PT => [esams, eqiad], # ESAMS-EQIAD # Portugal
                    RO => [esams, eqiad], # ESAMS-EQIAD # Romania
                    RS => [esams, eqiad], # ESAMS-EQIAD # Serbia
                    RU => [esams, ulsfo], # ESAMS-ULSFO # Russian Federation
                    SE => [esams, eqiad], # ESAMS-EQIAD # Sweden
                    SI => [esams, eqiad], # ESAMS-EQIAD # Slovenia
                    SJ => [esams, eqiad], # ESAMS-EQIAD # Svalbard and Jan Mayen Islands
                    SK => [esams, eqiad], # ESAMS-EQIAD # Slovakia
                    SM => [esams, eqiad], # ESAMS-EQIAD # San Marino
                    TR => [esams, eqiad], # ESAMS-EQIAD # Turkey
                    UA => [esams, eqiad], # ESAMS-EQIAD # Ukraine
                    VA => [esams, eqiad], # ESAMS-EQIAD # Holy See (Vatican City State)
                },
                NA => {
                    US => { # United States of America
                        AK => [ulsfo, eqiad], # Alaska
                        AL => [eqiad       ], # Alabama
                        AR => [eqiad       ], # Arkansas
                        AZ => [eqiad       ], # Arizona
                        CA => [eqiad       ], # California
                        CO => [eqiad       ], # Colorado
                        CT => [eqiad       ], # Connecticut
                        DC => [eqiad       ], # District of Columbia
                        DE => [eqiad       ], # Delaware
                        FL => [eqiad       ], # Florida
                        GA => [eqiad       ], # Georgia
                        HI => [ulsfo, eqiad], # Hawaii
                        IA => [eqiad       ], # Iowa
                        ID => [eqiad       ], # Idaho
                        IL => [eqiad       ], # Illinois
                        IN => [eqiad       ], # Indiana
                        KS => [eqiad       ], # Kansas
                        KY => [eqiad       ], # Kentucky
                        LA => [eqiad       ], # Louisiana
                        MA => [eqiad       ], # Massachusetts
                        MD => [eqiad       ], # Maryland
                        ME => [eqiad       ], # Maine
                        MI => [eqiad       ], # Michigan
                        MN => [eqiad       ], # Minnesota
                        MO => [eqiad       ], # Missouri
                        MS => [eqiad       ], # Mississippi
                        MT => [eqiad       ], # Montana
                        NC => [eqiad       ], # North Carolina
                        ND => [eqiad       ], # North Dakota
                        NE => [eqiad       ], # Nebraska
                        NH => [eqiad       ], # New Hampshire
                        NJ => [eqiad       ], # New Jersey
                        NM => [eqiad       ], # New Mexico
                        NV => [eqiad       ], # Nevada
                        NY => [eqiad       ], # New York
                        OH => [eqiad       ], # Ohio
                        OK => [eqiad       ], # Oklahoma
                        OR => [eqiad       ], # Oregon
                        PA => [eqiad       ], # Pennsylvania
                        RI => [eqiad       ], # Rhode Island
                        SC => [eqiad       ], # South Carolina
                        SD => [eqiad       ], # South Dakota
                        TN => [eqiad       ], # Tennessee
                        TX => [codfw, eqiad], # Texas
                        UT => [eqiad       ], # Utah
                        VA => [eqiad       ], # Virginia
                        VT => [eqiad       ], # Vermont
                        WA => [eqiad       ], # Washington
                        WI => [eqiad       ], # Wisconsin
                        WV => [eqiad       ], # West Virginia
                        WY => [eqiad       ], # Wyoming
                    },
                    CA => { # Canada
                        AB => [eqiad       ], # Alberta
                        BC => [eqiad       ], # British Columbia
                        MB => [eqiad       ], # Manitoba
                        NB => [eqiad       ], # New Brunswick
                        NL => [eqiad       ], # Newfoundland
                        NS => [eqiad       ], # Nova Scotia
                        NT => [eqiad       ], # Northwest Territories
                        NU => [eqiad       ], # Nunavut
                        ON => [eqiad       ], # Ontario
                        PE => [eqiad       ], # Prince Edward Island
                        QC => [eqiad       ], # Quebec
                        SK => [eqiad       ], # Saskatchewan
                        YT => [eqiad       ], # Yukon Territory
                    },
                },
                OC => [ulsfo, eqiad],
                default => eqiad,
            },
            nets = {
                # Wikimedia address space
                208.80.152.0/22   => [eqiad       ], # codfw, eqiad
                91.198.174.0/24   => [esams, eqiad], # ESAMS-EQIAD # esams
                185.15.56.0/22    => [esams, eqiad], # ESAMS-EQIAD # esams
                198.35.26.0/23    => [eqiad       ], # ulsfo
                2620:0:860::/48   => [eqiad       ], # codfw
                2620:0:861::/48   => [eqiad       ], # eqiad
                2620:0:862::/48   => [esams, eqiad], # ESAMS-EQIAD # esams
                2620:0:863::/48   => [eqiad       ], # ulsfo
                198.73.209.0/24   => [ulsfo, eqiad], # WMF OIT
                2620:62:c000::/48 => [ulsfo, eqiad], # WMF OIT
                # Level3's DNS clusters
                192.221.132.0/22  => [eqiad       ], # Atlanta
                192.221.136.0/22  => [eqiad       ], # Chicago
                192.221.140.0/22  => [eqiad       ], # Dallas
                192.221.148.0/22  => [eqiad       ], # Los Angeles
                192.221.156.0/22  => [eqiad       ], # New York
                192.221.160.0/22  => [eqiad       ], # San Jose
                192.221.164.0/22  => [eqiad       ], # Washington, DC
                8.0.4.0/22        => [eqiad       ], # Atlanta
                8.0.8.0/22        => [eqiad       ], # Chicago
                8.0.12.0/22       => [eqiad       ], # Dallas
                8.0.20.0/22       => [eqiad       ], # Los Angeles
                8.0.28.0/22       => [eqiad       ], # New York
                8.0.32.0/22       => [eqiad       ], # San Jose
                8.0.36.0/22       => [eqiad       ], # Washington, DC
            },
        },
    },
    resources => {
        text-addrs => {
            map => generic-map
            service_types => up
            dcmap => {
                eqiad => { addrs_v4 => 208.80.154.224, addrs_v6 => 2620:0:861:ed1a::1 }
                codfw => { addrs_v4 => 208.80.153.224, addrs_v6 => 2620:0:860:ed1a::1 }
                esams => { addrs_v4 => 91.198.174.192, addrs_v6 => 2620:0:862:ed1a::1 }
                ulsfo => { addrs_v4 => 198.35.26.96,   addrs_v6 => 2620:0:863:ed1a::1 }
            }
        }
        text-addrs-v4 => { # v4 from above, for e.g. donate and geoiplookup
            map => generic-map
            service_types => up
            dcmap => {
                eqiad => 208.80.154.224
                codfw => 208.80.153.224
                esams => 91.198.174.192
                ulsfo => 198.35.26.96
            }
        }
        upload-addrs => {
            map => generic-map
            service_types => up
            dcmap => {
                eqiad => { addrs_v4 => 208.80.154.240, addrs_v6 => 2620:0:861:ed1a::2:b }
                codfw => { addrs_v4 => 208.80.153.240, addrs_v6 => 2620:0:860:ed1a::2:b }
                esams => { addrs_v4 => 91.198.174.208, addrs_v6 => 2620:0:862:ed1a::2:b }
                ulsfo => { addrs_v4 => 198.35.26.112,  addrs_v6 => 2620:0:863:ed1a::2:b }
            }
        }
        mobile-addrs => {
            map => generic-map
            service_types => up
            dcmap => {
                eqiad => { addrs_v4 => 208.80.154.236, addrs_v6 => 2620:0:861:ed1a::1:c }
                codfw => { addrs_v4 => 208.80.153.236, addrs_v6 => 2620:0:860:ed1a::1:c }
                esams => { addrs_v4 => 91.198.174.204, addrs_v6 => 2620:0:862:ed1a::1:c }
                ulsfo => { addrs_v4 => 198.35.26.108,  addrs_v6 => 2620:0:863:ed1a::1:c }
            }
        }
    }
}}
