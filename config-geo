plugins => { geoip => {
    maps => {
        generic-map => {
            geoip_db => /usr/share/GeoIP/GeoLiteCityv6.dat
            geoip_db_v4_overlay => /usr/share/GeoIP/GeoIPCity.dat
            datacenters => [eqiad esams ulsfo]
            map => {
                # use ISO 3166-2 official names
                AF => esams,
                AS => {
                    AE => esams, # United Arab Emirates
                    AF => eqiad, # Afghanistan
                    AM => esams, # Armenia
                    AP => ulsfo, # Asia-Pacific region (misc)
                    AZ => esams, # Azerbaijan
                    BD => ulsfo, # Bangladesh
                    BH => esams, # Bahrain
                    BN => ulsfo, # Brunei Darussalam
                    BT => ulsfo, # Bhutan
                    CC => ulsfo, # Cocos (Keeling) Islands
                    CN => eqiad, # China
                    CX => ulsfo, # Christmas Island
                    CY => esams, # Cyprus
                    GE => esams, # Georgia
                    HK => ulsfo, # Hong Kong
                    ID => ulsfo, # Indonesia
                    IL => esams, # Israel
                    IN => eqiad, # India
                    IO => eqiad, # British Indian Ocean Territory
                    IQ => esams, # Iraq
                    IR => esams, # Iran (Islamic Republic of)
                    JO => esams, # Jordan
                    JP => ulsfo, # Japan
                    KG => eqiad, # Kyrgyzstan
                    KH => ulsfo, # Cambodia
                    KP => ulsfo, # Korea, Democratic People's Republic of
                    KR => ulsfo, # Korea, Republic of
                    KW => esams, # Kuwait
                    KZ => eqiad, # Kazakhstan
                    LA => ulsfo, # Lao People's Democratic Republic
                    LB => esams, # Lebanon
                    LK => eqiad, # Sri Lanka
                    MM => ulsfo, # Myanmar
                    MN => ulsfo, # Mongolia
                    MO => ulsfo, # Macao
                    MV => ulsfo, # Maldives
                    MY => ulsfo, # Malaysia
                    NP => ulsfo, # Nepal
                    OM => esams, # Oman
                    PH => ulsfo, # Philippines
                    PK => eqiad, # Pakistan
                    PS => esams, # Palestine, State of
                    QA => esams, # Qatar
                    SA => esams, # Saudi Arabia
                    SG => ulsfo, # Singapore
                    SY => esams, # Syrian Arab Republic
                    TH => ulsfo, # Thailand
                    TJ => eqiad, # Tajikistan
                    TL => ulsfo, # Timor-Leste
                    TM => eqiad, # Turkmenistan
                    TW => ulsfo, # Taiwan, Province of China
                    UZ => eqiad, # Uzbekistan
                    VN => ulsfo, # Viet Nam
                    YE => esams, # Yemen
                },
                EU => {
                    AD => esams, # Andorra
                    AL => esams, # Albania
                    AT => esams, # Austria
                    AX => esams, # Ã…land Islands
                    BA => esams, # Bosnia and Herzegowina
                    BE => esams, # Belgium
                    BG => esams, # Bulgaria
                    BY => esams, # Belarus
                    CH => esams, # Switzerland
                    CZ => esams, # Czech Republic
                    DE => esams, # Germany
                    DK => esams, # Denmark
                    EE => esams, # Estonia
                    ES => esams, # Spain
                    EU => esams, # Europe region (misc)
                    FI => esams, # Finland
                    FO => esams, # Faroe Islands
                    FR => esams, # France
                    GB => esams, # United Kingdom
                    GG => esams, # Guernsey
                    GI => esams, # Gibraltar
                    GR => esams, # Greece
                    HR => esams, # Croatia (local name Hrvatska)
                    HU => esams, # Hungary
                    IE => esams, # Ireland
                    IM => esams, # Isle of Man
                    IS => esams, # Iceland
                    IT => esams, # Italy
                    JE => esams, # Jersey
                    LI => esams, # Liechtenstein
                    LT => esams, # Lithuania
                    LU => esams, # Luxembourg
                    LV => esams, # Latvia
                    MC => esams, # Monaco
                    MD => esams, # Moldova, Republic of
                    ME => esams, # Montenegro
                    MK => esams, # Macedonia, the Former Yugoslav Republic of
                    MT => esams, # Malta
                    NL => esams, # Netherlands
                    NO => esams, # Norway
                    PL => esams, # Poland
                    PT => esams, # Portugal
                    RO => esams, # Romania
                    RS => esams, # Serbia
                    RU => esams, # Russian Federation
                    SE => esams, # Sweden
                    SI => esams, # Slovenia
                    SJ => esams, # Svalbard and Jan Mayen Islands
                    SK => esams, # Slovakia
                    SM => esams, # San Marino
                    TR => esams, # Turkey
                    UA => esams, # Ukraine
                    VA => esams, # Holy See (Vatican City State)
                },
                NA => {
                    US => { # United States of America
                        AK => ulsfo, # Alaska
                        AL => eqiad, # Alabama
                        AR => eqiad, # Arkansas
                        AZ => ulsfo, # Arizona
                        CA => ulsfo, # California
                        CO => ulsfo, # Colorado
                        CT => eqiad, # Connecticut
                        DC => eqiad, # District of Columbia
                        DE => eqiad, # Delaware
                        FL => eqiad, # Florida
                        GA => eqiad, # Georgia
                        HI => ulsfo, # Hawaii
                        IA => eqiad, # Iowa
                        ID => ulsfo, # Idaho
                        IL => eqiad, # Illinois
                        IN => eqiad, # Indiana
                        KS => eqiad, # Kansas
                        KY => eqiad, # Kentucky
                        LA => eqiad, # Louisiana
                        MA => eqiad, # Massachusetts
                        MD => eqiad, # Maryland
                        ME => eqiad, # Maine
                        MI => eqiad, # Michigan
                        MN => eqiad, # Minnesota
                        MO => eqiad, # Missouri
                        MS => eqiad, # Mississippi
                        MT => ulsfo, # Montana
                        NC => eqiad, # North Carolina
                        ND => eqiad, # North Dakota
                        NE => eqiad, # Nebraska
                        NH => eqiad, # New Hampshire
                        NJ => eqiad, # New Jersey
                        NM => ulsfo, # New Mexico
                        NV => ulsfo, # Nevada
                        NY => eqiad, # New York
                        OH => eqiad, # Ohio
                        OK => eqiad, # Oklahoma
                        OR => ulsfo, # Oregon
                        PA => eqiad, # Pennsylvania
                        RI => eqiad, # Rhode Island
                        SC => eqiad, # South Carolina
                        SD => eqiad, # South Dakota
                        TN => eqiad, # Tennessee
                        TX => eqiad, # Texas
                        UT => ulsfo, # Utah
                        VA => eqiad, # Virginia
                        VT => eqiad, # Vermont
                        WA => ulsfo, # Washington
                        WI => eqiad, # Wisconsin
                        WV => eqiad, # West Virginia
                        WY => ulsfo, # Wyoming
                    },
                    CA => { # Canada
                        AB => ulsfo, # Alberta
                        BC => ulsfo, # British Columbia
                        MB => eqiad, # Manitoba
                        NB => eqiad, # New Brunswick
                        NL => eqiad, # Newfoundland
                        NS => eqiad, # Nova Scotia
                        NT => ulsfo, # Northwest Territories
                        NU => eqiad, # Nunavut
                        ON => eqiad, # Ontario
                        PE => eqiad, # Prince Edward Island
                        QC => eqiad, # Quebec
                        SK => eqiad, # Saskatchewan
                        YT => ulsfo, # Yukon Territory
                    },
                },
                OC => ulsfo,
                default => eqiad,
            },
            nets = {
                208.80.152.0/22   => eqiad, # pmtpa, eqiad
                91.198.174.0/24   => esams, # esams
                185.15.56.0/22    => esams, # esams
                198.35.26.0/23    => eqiad, # ulsfo
                2620:0:860::/48   => eqiad, # pmtpa
                2620:0:861::/48   => eqiad, # eqiad
                2620:0:862::/48   => esams, # esams
                2620:0:863::/48   => eqiad, # ulsfo
                198.73.209.0/24   => ulsfo, # WMF OIT
                2620:62:c000::/48 => ulsfo, # WMF OIT
            },
        },
        only-primary-map => {
            geoip_db => /usr/share/GeoIP/GeoIPv6.dat
            geoip_db_v4_overlay => /usr/share/GeoIP/GeoIP.dat
            datacenters => [eqiad esams ulsfo]
            map => {
                default => eqiad,
            }
        },
    },
    resources => {
        bits => {
            map => generic-map
            dcmap => {
                eqiad => bits-lb.eqiad.wikimedia.org.
                esams => bits-lb.esams.wikimedia.org.
                ulsfo => bits-lb.ulsfo.wikimedia.org.
            }
        }
        upload => {
            map => generic-map
            dcmap => {
                eqiad => upload-lb.eqiad.wikimedia.org.
                esams => upload-lb.esams.wikimedia.org.
                ulsfo => upload-lb.ulsfo.wikimedia.org.
            }
        }
        geoiplookup => {
            map => generic-map
            dcmap => {
                eqiad => geoiplookup-lb.eqiad.wikimedia.org.
                esams => geoiplookup-lb.esams.wikimedia.org.
                ulsfo => geoiplookup-lb.ulsfo.wikimedia.org.
            }
        }
        donate => {
            map => generic-map
            dcmap => {
                eqiad => donate-lb.eqiad.wikimedia.org.
                esams => donate-lb.esams.wikimedia.org.
                ulsfo => donate-lb.ulsfo.wikimedia.org.
            }
        }
        text-lb => {
            map => generic-map
            dcmap => {
                eqiad => text-lb.eqiad.wikimedia.org.
                esams => text-lb.esams.wikimedia.org.
                ulsfo => text-lb.ulsfo.wikimedia.org.
            }
        }
        mobile-lb => {
            map => generic-map
            dcmap => {
                eqiad => mobile-lb.eqiad.wikimedia.org.
                esams => mobile-lb.esams.wikimedia.org.
                ulsfo => mobile-lb.ulsfo.wikimedia.org.
            }
        }
    }
}}
