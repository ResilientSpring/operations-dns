plugins => { geoip => {
    maps => {
        generic-map => {
            geoip_db => /usr/share/GeoIP/GeoLiteCityv6.dat
            geoip_db_v4_overlay => /usr/share/GeoIP/GeoIPCity.dat
            datacenters => [eqiad esams ulsfo]
            map => {
                # use ISO 3166-2 official names
                AF => [esams, eqiad],
                AS => {
                    AE => [esams, ulsfo], # ESAMS-ULSFO # United Arab Emirates
                    AF => [eqiad       ], # Afghanistan
                    AM => [esams, ulsfo], # ESAMS-ULSFO # Armenia
                    AP => [ulsfo, eqiad], # Asia-Pacific region (misc)
                    AZ => [esams, ulsfo], # ESAMS-ULSFO # Azerbaijan
                    BD => [ulsfo, eqiad], # Bangladesh
                    BH => [esams, ulsfo], # ESAMS-ULSFO # Bahrain
                    BN => [ulsfo, eqiad], # Brunei Darussalam
                    BT => [ulsfo, eqiad], # Bhutan
                    CC => [ulsfo, eqiad], # Cocos (Keeling) Islands
                    CN => [eqiad       ], # China
                    CX => [ulsfo, eqiad], # Christmas Island
                    CY => [esams, ulsfo], # ESAMS-ULSFO # Cyprus
                    GE => [esams, ulsfo], # ESAMS-ULSFO # Georgia
                    HK => [ulsfo, eqiad], # Hong Kong
                    ID => [ulsfo, eqiad], # Indonesia
                    IL => [esams, ulsfo], # ESAMS-ULSFO # Israel
                    IN => [eqiad       ], # India
                    IO => [eqiad       ], # British Indian Ocean Territory
                    IQ => [esams, ulsfo], # ESAMS-ULSFO # Iraq
                    IR => [esams, ulsfo], # ESAMS-ULSFO # Iran (Islamic Republic of)
                    JO => [esams, ulsfo], # ESAMS-ULSFO # Jordan
                    JP => [ulsfo, eqiad], # Japan
                    KG => [eqiad       ], # Kyrgyzstan
                    KH => [ulsfo, eqiad], # Cambodia
                    KP => [ulsfo, eqiad], # Korea, Democratic People's Republic of
                    KR => [ulsfo, eqiad], # Korea, Republic of
                    KW => [esams, ulsfo], # ESAMS-ULSFO # Kuwait
                    KZ => [eqiad       ], # Kazakhstan
                    LA => [ulsfo, eqiad], # Lao People's Democratic Republic
                    LB => [esams, ulsfo], # ESAMS-ULSFO # Lebanon
                    LK => [eqiad       ], # Sri Lanka
                    MM => [ulsfo, eqiad], # Myanmar
                    MN => [ulsfo, eqiad], # Mongolia
                    MO => [ulsfo, eqiad], # Macao
                    MV => [ulsfo, eqiad], # Maldives
                    MY => [ulsfo, eqiad], # Malaysia
                    NP => [ulsfo, eqiad], # Nepal
                    OM => [esams, ulsfo], # ESAMS-ULSFO # Oman
                    PH => [ulsfo, eqiad], # Philippines
                    PK => [eqiad       ], # Pakistan
                    PS => [esams, ulsfo], # ESAMS-ULSFO # Palestine, State of
                    QA => [esams, ulsfo], # ESAMS-ULSFO # Qatar
                    SA => [esams, ulsfo], # ESAMS-ULSFO # Saudi Arabia
                    SG => [ulsfo, eqiad], # Singapore
                    SY => [esams, ulsfo], # ESAMS-ULSFO # Syrian Arab Republic
                    TH => [ulsfo, eqiad], # Thailand
                    TJ => [eqiad       ], # Tajikistan
                    TL => [ulsfo, eqiad], # Timor-Leste
                    TM => [eqiad       ], # Turkmenistan
                    TW => [ulsfo, eqiad], # Taiwan, Province of China
                    UZ => [eqiad       ], # Uzbekistan
                    VN => [ulsfo, eqiad], # Viet Nam
                    YE => [esams, ulsfo], # ESAMS-ULSFO # Yemen
                },
                EU => {
                    AD => [esams, eqiad], # Andorra
                    AL => [esams, eqiad], # Albania
                    AT => [esams, eqiad], # Austria
                    AX => [esams, eqiad], # Ã…land Islands
                    BA => [esams, eqiad], # Bosnia and Herzegowina
                    BE => [esams, eqiad], # Belgium
                    BG => [esams, eqiad], # Bulgaria
                    BY => [esams, eqiad], # Belarus
                    CH => [esams, eqiad], # Switzerland
                    CZ => [esams, eqiad], # Czech Republic
                    DE => [esams, eqiad], # Germany
                    DK => [esams, eqiad], # Denmark
                    EE => [esams, eqiad], # Estonia
                    ES => [esams, eqiad], # Spain
                    EU => [esams, eqiad], # Europe region (misc)
                    FI => [esams, eqiad], # Finland
                    FO => [esams, eqiad], # Faroe Islands
                    FR => [esams, eqiad], # France
                    GB => [esams, eqiad], # United Kingdom
                    GG => [esams, eqiad], # Guernsey
                    GI => [esams, eqiad], # Gibraltar
                    GR => [esams, eqiad], # Greece
                    HR => [esams, eqiad], # Croatia (local name Hrvatska)
                    HU => [esams, eqiad], # Hungary
                    IE => [esams, eqiad], # Ireland
                    IM => [esams, eqiad], # Isle of Man
                    IS => [esams, eqiad], # Iceland
                    IT => [esams, eqiad], # Italy
                    JE => [esams, eqiad], # Jersey
                    LI => [esams, eqiad], # Liechtenstein
                    LT => [esams, eqiad], # Lithuania
                    LU => [esams, eqiad], # Luxembourg
                    LV => [esams, eqiad], # Latvia
                    MC => [esams, eqiad], # Monaco
                    MD => [esams, eqiad], # Moldova, Republic of
                    ME => [esams, eqiad], # Montenegro
                    MK => [esams, eqiad], # Macedonia, the Former Yugoslav Republic of
                    MT => [esams, eqiad], # Malta
                    NL => [esams, eqiad], # Netherlands
                    NO => [esams, eqiad], # Norway
                    PL => [esams, eqiad], # Poland
                    PT => [esams, eqiad], # Portugal
                    RO => [esams, eqiad], # Romania
                    RS => [esams, eqiad], # Serbia
                    RU => [esams, ulsfo], # ESAMS-ULSFO # Russian Federation
                    SE => [esams, eqiad], # Sweden
                    SI => [esams, eqiad], # Slovenia
                    SJ => [esams, eqiad], # Svalbard and Jan Mayen Islands
                    SK => [esams, eqiad], # Slovakia
                    SM => [esams, eqiad], # San Marino
                    TR => [esams, eqiad], # Turkey
                    UA => [esams, eqiad], # Ukraine
                    VA => [esams, eqiad], # Holy See (Vatican City State)
                },
                NA => {
                    US => { # United States of America
                        AK => [ulsfo, eqiad], # Alaska
                        AL => [eqiad       ], # Alabama
                        AR => [eqiad       ], # Arkansas
                        AZ => [ulsfo, eqiad], # Arizona
                        CA => [ulsfo, eqiad], # California
                        CO => [ulsfo, eqiad], # Colorado
                        CT => [eqiad       ], # Connecticut
                        DC => [eqiad       ], # District of Columbia
                        DE => [eqiad       ], # Delaware
                        FL => [eqiad       ], # Florida
                        GA => [eqiad       ], # Georgia
                        HI => [ulsfo, eqiad], # Hawaii
                        IA => [eqiad       ], # Iowa
                        ID => [ulsfo, eqiad], # Idaho
                        IL => [eqiad       ], # Illinois
                        IN => [eqiad       ], # Indiana
                        KS => [eqiad       ], # Kansas
                        KY => [eqiad       ], # Kentucky
                        LA => [eqiad       ], # Louisiana
                        MA => [eqiad       ], # Massachusetts
                        MD => [eqiad       ], # Maryland
                        ME => [eqiad       ], # Maine
                        MI => [eqiad       ], # Michigan
                        MN => [eqiad       ], # Minnesota
                        MO => [eqiad       ], # Missouri
                        MS => [eqiad       ], # Mississippi
                        MT => [ulsfo, eqiad], # Montana
                        NC => [eqiad       ], # North Carolina
                        ND => [eqiad       ], # North Dakota
                        NE => [eqiad       ], # Nebraska
                        NH => [eqiad       ], # New Hampshire
                        NJ => [eqiad       ], # New Jersey
                        NM => [ulsfo, eqiad], # New Mexico
                        NV => [ulsfo, eqiad], # Nevada
                        NY => [eqiad       ], # New York
                        OH => [eqiad       ], # Ohio
                        OK => [eqiad       ], # Oklahoma
                        OR => [ulsfo, eqiad], # Oregon
                        PA => [eqiad       ], # Pennsylvania
                        RI => [eqiad       ], # Rhode Island
                        SC => [eqiad       ], # South Carolina
                        SD => [eqiad       ], # South Dakota
                        TN => [eqiad       ], # Tennessee
                        TX => [eqiad       ], # Texas
                        UT => [ulsfo, eqiad], # Utah
                        VA => [eqiad       ], # Virginia
                        VT => [eqiad       ], # Vermont
                        WA => [ulsfo, eqiad], # Washington
                        WI => [eqiad       ], # Wisconsin
                        WV => [eqiad       ], # West Virginia
                        WY => [ulsfo, eqiad], # Wyoming
                    },
                    CA => { # Canada
                        AB => [ulsfo, eqiad], # Alberta
                        BC => [ulsfo, eqiad], # British Columbia
                        MB => [eqiad       ], # Manitoba
                        NB => [eqiad       ], # New Brunswick
                        NL => [eqiad       ], # Newfoundland
                        NS => [eqiad       ], # Nova Scotia
                        NT => [ulsfo, eqiad], # Northwest Territories
                        NU => [eqiad       ], # Nunavut
                        ON => [eqiad       ], # Ontario
                        PE => [eqiad       ], # Prince Edward Island
                        QC => [eqiad       ], # Quebec
                        SK => [eqiad       ], # Saskatchewan
                        YT => [ulsfo, eqiad], # Yukon Territory
                    },
                },
                OC => [ulsfo, eqiad],
                default => eqiad,
            },
            nets = {
                208.80.152.0/22   => [eqiad       ], # pmtpa, eqiad
                91.198.174.0/24   => [esams, eqiad], # esams
                185.15.56.0/22    => [esams, eqiad], # esams
                198.35.26.0/23    => [eqiad       ], # ulsfo
                2620:0:860::/48   => [eqiad       ], # pmtpa
                2620:0:861::/48   => [eqiad       ], # eqiad
                2620:0:862::/48   => [esams, eqiad], # esams
                2620:0:863::/48   => [eqiad       ], # ulsfo
                198.73.209.0/24   => [ulsfo, eqiad], # WMF OIT
                2620:62:c000::/48 => [ulsfo, eqiad], # WMF OIT
            },
        },
        only-primary-map => {
            geoip_db => /usr/share/GeoIP/GeoIPv6.dat
            geoip_db_v4_overlay => /usr/share/GeoIP/GeoIP.dat
            datacenters => [eqiad esams ulsfo]
            map => {
                default => eqiad,
            }
        },
    },
    resources => {
        text-addrs => {
            map => generic-map
            service_types => up
            dcmap => {
                eqiad => { addrs_v4 => 208.80.154.224, addrs_v6 => 2620:0:861:ed1a::1 }
                esams => { addrs_v4 => 91.198.174.192, addrs_v6 => 2620:0:862:ed1a::1 }
                ulsfo => { addrs_v4 => 198.35.26.96,   addrs_v6 => 2620:0:863:ed1a::1 }
            }
        }
        text-addrs-v4 => { # v4 from above, for e.g. donate
            map => generic-map
            service_types => up
            dcmap => {
                eqiad => 208.80.154.224
                esams => 91.198.174.192
                ulsfo => 198.35.26.96
            }
        }
        bits-addrs => {
            map => generic-map
            service_types => up
            dcmap => {
                eqiad => { addrs_v4 => 208.80.154.234, addrs_v6 => 2620:0:861:ed1a::1:a }
                esams => { addrs_v4 => 91.198.174.202, addrs_v6 => 2620:0:862:ed1a::1:a }
                ulsfo => { addrs_v4 => 198.35.26.106,  addrs_v6 => 2620:0:863:ed1a::1:a }
            }
        }
        bits-addrs-v4 => { # v4 from above, for e.g. geoiplookup
            map => generic-map
            service_types => up
            dcmap => {
                eqiad => 208.80.154.234
                esams => 91.198.174.202
                ulsfo => 198.35.26.106
            }
        }
        upload-addrs => {
            map => generic-map
            service_types => up
            dcmap => {
                eqiad => { addrs_v4 => 208.80.154.240, addrs_v6 => 2620:0:861:ed1a::2:b }
                esams => { addrs_v4 => 91.198.174.208, addrs_v6 => 2620:0:862:ed1a::2:b }
                ulsfo => { addrs_v4 => 198.35.26.112,  addrs_v6 => 2620:0:863:ed1a::2:b }
            }
        }
        mobile-addrs => {
            map => generic-map
            service_types => up
            dcmap => {
                eqiad => { addrs_v4 => 208.80.154.236, addrs_v6 => 2620:0:861:ed1a::1:c }
                esams => { addrs_v4 => 91.198.174.204, addrs_v6 => 2620:0:862:ed1a::1:c }
                ulsfo => { addrs_v4 => 198.35.26.108,  addrs_v6 => 2620:0:863:ed1a::1:c }
            }
        }
        login-addrs => {
            map => generic-map
            service_types => up
            dcmap => {
                eqiad => { addrs_v4 => 208.80.154.233, addrs_v6 => 2620:0:861:ed1a::1:9 }
                esams => { addrs_v4 => 91.198.174.201, addrs_v6 => 2620:0:862:ed1a::1:9 }
                ulsfo => { addrs_v4 => 198.35.26.105,  addrs_v6 => 2620:0:863:ed1a::1:9 }
            }
        }
    }
}}
