plugins => { geoip => {
	maps => {
		generic-map => {
			geoip_db => /usr/share/GeoIP/GeoLiteCityv6.dat
			geoip_db_v4_overlay => /usr/share/GeoIP/GeoIPCity.dat
			datacenters => [eqiad pmtpa esams ulsfo]
			map => {
				# use ISO 3166-2 official names
				AF => esams,
				AS => {
					AE => esams, # United Arab Emirates
					AM => esams, # Armenia
					AZ => esams, # Azerbaijan
					BH => esams, # Bahrain
					CN => eqiad, # China
					CY => esams, # Cyprus
					GE => esams, # Georgia
					IL => esams, # Israel
					IQ => esams, # Iraq
					IR => esams, # Iran (Islamic Republic of)
					JO => esams, # Jordan
					JP => ulsfo, # Japan
					KH => ulsfo, # Cambodia
					KP => ulsfo, # Korea, Democratic People's Republic of
					KR => ulsfo, # Korea, Republic of
					KW => esams, # Kuwait
					LA => eqiad, # Lao People's Democratic Republic
					LB => esams, # Lebanon
					MN => eqiad, # Mongolia
					MY => ulsfo, # Malaysia
					OM => esams, # Oman
					PH => ulsfo, # Philippines
					PS => esams, # Palestine, State of
					QA => esams, # Qatar
					SA => esams, # Saudi Arabia
					SG => ulsfo, # Singapore
					SY => esams, # Syrian Arab Republic
					TH => eqiad, # Thailand
					TW => ulsfo, # Taiwan, Province of China
					VN => eqiad, # Viet Nam
					YE => esams, # Yemen
				},
				EU => {
					AD => esams, # Andorra
					AL => esams, # Albania
					AT => esams, # Austria
					AX => esams, # Ã…land Islands
					BA => esams, # Bosnia and Herzegowina
					BE => esams, # Belgium
					BG => esams, # Bulgaria
					BY => esams, # Belarus
					CH => esams, # Switzerland
					CZ => esams, # Czech Republic
					DE => esams, # Germany
					DK => esams, # Denmark
					EE => esams, # Estonia
					ES => esams, # Spain
					EU => esams, # Europe
					FI => esams, # Finland
					FO => esams, # Faroe Islands
					FR => esams, # France
					GB => esams, # United Kingdom
					GG => esams, # Guernsey
					GI => esams, # Gibraltar
					GR => esams, # Greece
					HR => esams, # Croatia (local name Hrvatska)
					HU => esams, # Hungary
					IE => esams, # Ireland
					IM => esams, # Isle of Man
					IS => esams, # Iceland
					IT => esams, # Italy
					JE => esams, # Jersey
					LI => esams, # Liechtenstein
					LT => esams, # Lithuania
					LU => esams, # Luxembourg
					LV => esams, # Latvia
					MC => esams, # Monaco
					MD => esams, # Moldova, Republic of
					ME => esams, # Montenegro
					MK => esams, # Macedonia, the Former Yugoslav Republic of
					MT => esams, # Malta
					NL => esams, # Netherlands
					NO => esams, # Norway
					PL => esams, # Poland
					PT => esams, # Portugal
					RO => esams, # Romania
					RS => esams, # Serbia
					RU => esams, # Russian Federation
					SE => esams, # Sweden
					SI => esams, # Slovenia
					SJ => esams, # Svalbard and Jan Mayen Islands
					SK => esams, # Slovakia
					SM => esams, # San Marino
					TR => esams, # Turkey
					UA => esams, # Ukraine
					VA => esams, # Holy See (Vatican City State)
				},
				NA => {
					US => { # United States of America
						AK => eqiad, # Alaska
						AL => eqiad, # Alabama
						AR => eqiad, # Arkansas
						AZ => eqiad, # Arizona
						CA => eqiad, # California
						CO => eqiad, # Colorado
						CT => eqiad, # Connecticut
						DC => eqiad, # District of Columbia
						DE => eqiad, # Delaware
						FL => eqiad, # Florida
						GA => eqiad, # Georgia
						HI => eqiad, # Hawaii
						IA => eqiad, # Iowa
						ID => eqiad, # Idaho
						IL => eqiad, # Illinois
						IN => eqiad, # Indiana
						KS => eqiad, # Kansas
						KY => eqiad, # Kentucky
						LA => eqiad, # Louisiana
						MA => eqiad, # Massachusetts
						MD => eqiad, # Maryland
						ME => eqiad, # Maine
						MI => eqiad, # Michigan
						MN => eqiad, # Minnesota
						MO => eqiad, # Missouri
						MS => eqiad, # Mississippi
						MT => eqiad, # Montana
						NC => eqiad, # North Carolina
						ND => eqiad, # North Dakota
						NE => eqiad, # Nebraska
						NH => eqiad, # New Hampshire
						NJ => eqiad, # New Jersey
						NM => eqiad, # New Mexico
						NV => eqiad, # Nevada
						NY => eqiad, # New York
						OH => eqiad, # Ohio
						OK => eqiad, # Oklahoma
						OR => eqiad, # Oregon
						PA => eqiad, # Pennsylvania
						RI => eqiad, # Rhode Island
						SC => eqiad, # South Carolina
						SD => eqiad, # South Dakota
						TN => eqiad, # Tennessee
						TX => eqiad, # Texas
						UT => eqiad, # Utah
						VA => eqiad, # Virginia
						VT => eqiad, # Vermont
						WA => eqiad, # Washington
						WI => eqiad, # Wisconsin
						WV => eqiad, # West Virginia
						WY => eqiad, # Wyoming
					},
					CA => { # Canada
						AB => eqiad, # Alberta
						BC => eqiad, # British Columbia
						MB => eqiad, # Manitoba
						NB => eqiad, # New Brunswick
						NL => eqiad, # Newfoundland
						NS => eqiad, # Nova Scotia
						NT => eqiad, # Northwest Territories
						NU => eqiad, # Nunavut
						ON => eqiad, # Ontario
						PE => eqiad, # Prince Edward Island
						QC => eqiad, # Quebec
						SK => eqiad, # Saskatchewan
						YT => eqiad, # Yukon Territory
					},
				},
				OC => ulsfo,
				default => eqiad,
			}
		},
		only-primary-map => {
			geoip_db => /usr/share/GeoIP/GeoIPv6.dat
			geoip_db_v4_overlay => /usr/share/GeoIP/GeoIP.dat
			datacenters => [eqiad pmtpa]
			map => {
				default => eqiad,
			}
		},
	},
	resources => {
		bits => {
			map => generic-map
			dcmap => {
				pmtpa => bits-lb.pmtpa.wikimedia.org.
				eqiad => bits-lb.eqiad.wikimedia.org.
				esams => bits-lb.esams.wikimedia.org.
				ulsfo => bits-lb.ulsfo.wikimedia.org.
			}
		}
		upload => {
			map => generic-map
			dcmap => {
				pmtpa => upload-lb.pmtpa.wikimedia.org.
				eqiad => upload-lb.eqiad.wikimedia.org.
				esams => upload-lb.esams.wikimedia.org.
				ulsfo => upload-lb.ulsfo.wikimedia.org.
			}
		}
		geoiplookup => {
			map => generic-map
			dcmap => {
				pmtpa => geoiplookup-lb.pmtpa.wikimedia.org.
				eqiad => geoiplookup-lb.eqiad.wikimedia.org.
				esams => geoiplookup-lb.esams.wikimedia.org.
				ulsfo => geoiplookup-lb.ulsfo.wikimedia.org.
			}
		}
		donate => {
			map => generic-map
			dcmap => {
				pmtpa => donate-lb.pmtpa.wikimedia.org.
				eqiad => donate-lb.eqiad.wikimedia.org.
				esams => donate-lb.esams.wikimedia.org.
				ulsfo => donate-lb.ulsfo.wikimedia.org.
			}
		}
		# text
		foundation-lb => {
			map => generic-map
			dcmap => {
				pmtpa => foundation-lb.pmtpa.wikimedia.org.
				eqiad => foundation-lb.eqiad.wikimedia.org.
				esams => text-lb.esams.wikimedia.org.
				ulsfo => text-lb.ulsfo.wikimedia.org.
			}
		}
		mediawiki-lb => {
			map => generic-map
			dcmap => {
				pmtpa => mediawiki-lb.pmtpa.wikimedia.org.
				eqiad => mediawiki-lb.eqiad.wikimedia.org.
				esams => text-lb.esams.wikimedia.org.
				ulsfo => text-lb.ulsfo.wikimedia.org.
			}
		}
		wikibooks-lb => {
			map => generic-map
			dcmap => {
				pmtpa => wikibooks-lb.pmtpa.wikimedia.org.
				eqiad => wikibooks-lb.eqiad.wikimedia.org.
				esams => text-lb.esams.wikimedia.org.
				ulsfo => text-lb.ulsfo.wikimedia.org.
			}
		}
		wikimedia-lb => {
			map => generic-map
			dcmap => {
				pmtpa => wikimedia-lb.pmtpa.wikimedia.org.
				eqiad => wikimedia-lb.eqiad.wikimedia.org.
				esams => text-lb.esams.wikimedia.org.
				ulsfo => text-lb.ulsfo.wikimedia.org.
			}
		}
		wikinews-lb => {
			map => generic-map
			dcmap => {
				pmtpa => wikinews-lb.pmtpa.wikimedia.org.
				eqiad => wikinews-lb.eqiad.wikimedia.org.
				esams => text-lb.esams.wikimedia.org.
				ulsfo => text-lb.ulsfo.wikimedia.org.
			}
		}
		wikipedia-lb => {
			map => generic-map
			dcmap => {
				pmtpa => wikipedia-lb.pmtpa.wikimedia.org.
				eqiad => wikipedia-lb.eqiad.wikimedia.org.
				esams => wikipedia-lb.esams.wikimedia.org.
				ulsfo => text-lb.ulsfo.wikimedia.org.
			}
		}
		wikiquote-lb => {
			map => generic-map
			dcmap => {
				pmtpa => wikiquote-lb.pmtpa.wikimedia.org.
				eqiad => wikiquote-lb.eqiad.wikimedia.org.
				esams => text-lb.esams.wikimedia.org.
				ulsfo => text-lb.ulsfo.wikimedia.org.
			}
		}
		wikisource-lb => {
			map => generic-map
			dcmap => {
				pmtpa => wikisource-lb.pmtpa.wikimedia.org.
				eqiad => wikisource-lb.eqiad.wikimedia.org.
				esams => text-lb.esams.wikimedia.org.
				ulsfo => text-lb.ulsfo.wikimedia.org.
			}
		}
		wikiversity-lb => {
			map => generic-map
			dcmap => {
				pmtpa => wikiversity-lb.pmtpa.wikimedia.org.
				eqiad => wikiversity-lb.eqiad.wikimedia.org.
				esams => text-lb.esams.wikimedia.org.
				ulsfo => text-lb.ulsfo.wikimedia.org.
			}
		}
		wiktionary-lb => {
			map => generic-map
			dcmap => {
				pmtpa => wiktionary-lb.pmtpa.wikimedia.org.
				eqiad => wiktionary-lb.eqiad.wikimedia.org.
				esams => text-lb.esams.wikimedia.org.
				ulsfo => text-lb.ulsfo.wikimedia.org.
			}
		}
		mobile-lb => {
			map => generic-map
			dcmap => {
				pmtpa => mobile-lb.pmtpa.wikimedia.org.
				eqiad => mobile-lb.eqiad.wikimedia.org.
				esams => mobile-lb.esams.wikimedia.org.
				ulsfo => mobile-lb.ulsfo.wikimedia.org.
			}
		}
		wikidata-lb => {
			map => generic-map
			dcmap => {
				pmtpa => wikidata-lb.pmtpa.wikimedia.org.
				eqiad => wikidata-lb.eqiad.wikimedia.org.
				esams => text-lb.esams.wikimedia.org.
				ulsfo => text-lb.ulsfo.wikimedia.org.
			}
		}
		wikivoyage-lb => {
			map => generic-map
			dcmap => {
				pmtpa => wikivoyage-lb.pmtpa.wikimedia.org.
				eqiad => wikivoyage-lb.eqiad.wikimedia.org.
				esams => text-lb.esams.wikimedia.org.
				ulsfo => text-lb.ulsfo.wikimedia.org.
			}
		}
	}
}}
