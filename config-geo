plugins => { geoip => {
    maps => {
        generic-map => {
            geoip2_db => /usr/share/GeoIP/GeoIP2-City.mmdb
            datacenters => [eqiad codfw esams ulsfo]
            map => {
                # use ISO 3166-2 official names
                AF => [esams, eqiad, codfw],
                AS => {
                    AE => [esams, eqiad, codfw], # United Arab Emirates
                    AF => [       eqiad, codfw], # Afghanistan
                    AM => [esams, eqiad, codfw], # Armenia
                    AP => [ulsfo, eqiad, codfw], # Asia-Pacific region (misc)
                    AZ => [esams, eqiad, codfw], # Azerbaijan
                    BD => [ulsfo, eqiad, codfw], # Bangladesh
                    BH => [esams, eqiad, codfw], # Bahrain
                    BN => [ulsfo, eqiad, codfw], # Brunei Darussalam
                    BT => [ulsfo, eqiad, codfw], # Bhutan
                    CC => [ulsfo, eqiad, codfw], # Cocos (Keeling) Islands
                    CN => [ulsfo, eqiad, codfw], # China
                    CX => [ulsfo, eqiad, codfw], # Christmas Island
                    CY => [esams, eqiad, codfw], # Cyprus
                    GE => [esams, eqiad, codfw], # Georgia
                    HK => [ulsfo, eqiad, codfw], # Hong Kong
                    ID => [ulsfo, eqiad, codfw], # Indonesia
                    IL => [esams, eqiad, codfw], # Israel
                    IN => [       eqiad, codfw], # India
                    IO => [       eqiad, codfw], # British Indian Ocean Territory
                    IQ => [esams, eqiad, codfw], # Iraq
                    IR => [esams, eqiad, codfw], # Iran (Islamic Republic of)
                    JO => [esams, eqiad, codfw], # Jordan
                    JP => [ulsfo, eqiad, codfw], # Japan
                    KG => [       eqiad, codfw], # Kyrgyzstan
                    KH => [ulsfo, eqiad, codfw], # Cambodia
                    KP => [ulsfo, eqiad, codfw], # Korea, Democratic People's Republic of
                    KR => [ulsfo, eqiad, codfw], # Korea, Republic of
                    KW => [esams, eqiad, codfw], # Kuwait
                    KZ => [       eqiad, codfw], # Kazakhstan
                    LA => [ulsfo, eqiad, codfw], # Lao People's Democratic Republic
                    LB => [esams, eqiad, codfw], # Lebanon
                    LK => [       eqiad, codfw], # Sri Lanka
                    MM => [ulsfo, eqiad, codfw], # Myanmar
                    MN => [ulsfo, eqiad, codfw], # Mongolia
                    MO => [ulsfo, eqiad, codfw], # Macao
                    MV => [ulsfo, eqiad, codfw], # Maldives
                    MY => [ulsfo, eqiad, codfw], # Malaysia
                    NP => [ulsfo, eqiad, codfw], # Nepal
                    OM => [esams, eqiad, codfw], # Oman
                    PH => [ulsfo, eqiad, codfw], # Philippines
                    PK => [       eqiad, codfw], # Pakistan
                    PS => [esams, eqiad, codfw], # Palestine, State of
                    QA => [esams, eqiad, codfw], # Qatar
                    SA => [esams, eqiad, codfw], # Saudi Arabia
                    SG => [ulsfo, eqiad, codfw], # Singapore
                    SY => [esams, eqiad, codfw], # Syrian Arab Republic
                    TH => [ulsfo, eqiad, codfw], # Thailand
                    TJ => [       eqiad, codfw], # Tajikistan
                    TL => [ulsfo, eqiad, codfw], # Timor-Leste
                    TM => [       eqiad, codfw], # Turkmenistan
                    TW => [ulsfo, eqiad, codfw], # Taiwan, Province of China
                    UZ => [       eqiad, codfw], # Uzbekistan
                    VN => [ulsfo, eqiad, codfw], # Viet Nam
                    YE => [esams, eqiad, codfw], # Yemen
                },
                EU => {
                    AD => [esams, eqiad, codfw], # Andorra
                    AL => [esams, eqiad, codfw], # Albania
                    AT => [esams, eqiad, codfw], # Austria
                    AX => [esams, eqiad, codfw], # Ã…land Islands
                    BA => [esams, eqiad, codfw], # Bosnia and Herzegowina
                    BE => [esams, eqiad, codfw], # Belgium
                    BG => [esams, eqiad, codfw], # Bulgaria
                    BY => [esams, eqiad, codfw], # Belarus
                    CH => [esams, eqiad, codfw], # Switzerland
                    CZ => [esams, eqiad, codfw], # Czech Republic
                    DE => [esams, eqiad, codfw], # Germany
                    DK => [esams, eqiad, codfw], # Denmark
                    EE => [esams, eqiad, codfw], # Estonia
                    ES => [esams, eqiad, codfw], # Spain
                    EU => [esams, eqiad, codfw], # Europe region (misc)
                    FI => [esams, eqiad, codfw], # Finland
                    FO => [esams, eqiad, codfw], # Faroe Islands
                    FR => [esams, eqiad, codfw], # France
                    GB => [esams, eqiad, codfw], # United Kingdom
                    GG => [esams, eqiad, codfw], # Guernsey
                    GI => [esams, eqiad, codfw], # Gibraltar
                    GR => [esams, eqiad, codfw], # Greece
                    HR => [esams, eqiad, codfw], # Croatia (local name Hrvatska)
                    HU => [esams, eqiad, codfw], # Hungary
                    IE => [esams, eqiad, codfw], # Ireland
                    IM => [esams, eqiad, codfw], # Isle of Man
                    IS => [esams, eqiad, codfw], # Iceland
                    IT => [esams, eqiad, codfw], # Italy
                    JE => [esams, eqiad, codfw], # Jersey
                    LI => [esams, eqiad, codfw], # Liechtenstein
                    LT => [esams, eqiad, codfw], # Lithuania
                    LU => [esams, eqiad, codfw], # Luxembourg
                    LV => [esams, eqiad, codfw], # Latvia
                    MC => [esams, eqiad, codfw], # Monaco
                    MD => [esams, eqiad, codfw], # Moldova, Republic of
                    ME => [esams, eqiad, codfw], # Montenegro
                    MK => [esams, eqiad, codfw], # Macedonia, the Former Yugoslav Republic of
                    MT => [esams, eqiad, codfw], # Malta
                    NL => [esams, eqiad, codfw], # Netherlands
                    NO => [esams, eqiad, codfw], # Norway
                    PL => [esams, eqiad, codfw], # Poland
                    PT => [esams, eqiad, codfw], # Portugal
                    RO => [esams, eqiad, codfw], # Romania
                    RS => [esams, eqiad, codfw], # Serbia
                    RU => [esams, ulsfo, codfw], # Russian Federation
                    SE => [esams, eqiad, codfw], # Sweden
                    SI => [esams, eqiad, codfw], # Slovenia
                    SJ => [esams, eqiad, codfw], # Svalbard and Jan Mayen Islands
                    SK => [esams, eqiad, codfw], # Slovakia
                    SM => [esams, eqiad, codfw], # San Marino
                    TR => [esams, eqiad, codfw], # Turkey
                    UA => [esams, eqiad, codfw], # Ukraine
                    VA => [esams, eqiad, codfw], # Holy See (Vatican City State)
                },
                NA => {
                    US => { # United States of America
                        AK => [ulsfo, eqiad, codfw], # Alaska
                        AL => [       eqiad, codfw], # Alabama
                        AR => [       codfw, eqiad], # Arkansas
                        AZ => [ulsfo, eqiad, codfw], # Arizona
                        CA => [ulsfo, eqiad, codfw], # California
                        CO => [ulsfo, eqiad, codfw], # Colorado
                        CT => [       eqiad, codfw], # Connecticut
                        DC => [       eqiad, codfw], # District of Columbia
                        DE => [       eqiad, codfw], # Delaware
                        FL => [       eqiad, codfw], # Florida
                        GA => [       eqiad, codfw], # Georgia
                        HI => [ulsfo, eqiad, codfw], # Hawaii
                        IA => [       eqiad, codfw], # Iowa
                        ID => [ulsfo, eqiad, codfw], # Idaho
                        IL => [       eqiad, codfw], # Illinois
                        IN => [       eqiad, codfw], # Indiana
                        KS => [       eqiad, codfw], # Kansas
                        KY => [       eqiad, codfw], # Kentucky
                        LA => [       codfw, eqiad], # Louisiana
                        MA => [       eqiad, codfw], # Massachusetts
                        MD => [       eqiad, codfw], # Maryland
                        ME => [       eqiad, codfw], # Maine
                        MI => [       eqiad, codfw], # Michigan
                        MN => [       eqiad, codfw], # Minnesota
                        MO => [       eqiad, codfw], # Missouri
                        MS => [       eqiad, codfw], # Mississippi
                        MT => [ulsfo, eqiad, codfw], # Montana
                        NC => [       eqiad, codfw], # North Carolina
                        ND => [       eqiad, codfw], # North Dakota
                        NE => [       eqiad, codfw], # Nebraska
                        NH => [       eqiad, codfw], # New Hampshire
                        NJ => [       eqiad, codfw], # New Jersey
                        NM => [       codfw, eqiad], # New Mexico
                        NV => [ulsfo, eqiad, codfw], # Nevada
                        NY => [       eqiad, codfw], # New York
                        OH => [       eqiad, codfw], # Ohio
                        OK => [       codfw, eqiad], # Oklahoma
                        OR => [ulsfo, eqiad, codfw], # Oregon
                        PA => [       eqiad, codfw], # Pennsylvania
                        RI => [       eqiad, codfw], # Rhode Island
                        SC => [       eqiad, codfw], # South Carolina
                        SD => [       eqiad, codfw], # South Dakota
                        TN => [       eqiad, codfw], # Tennessee
                        TX => [       codfw, eqiad], # Texas
                        UT => [ulsfo, eqiad, codfw], # Utah
                        VA => [       eqiad, codfw], # Virginia
                        VT => [       eqiad, codfw], # Vermont
                        WA => [ulsfo, eqiad, codfw], # Washington
                        WI => [       eqiad, codfw], # Wisconsin
                        WV => [       eqiad, codfw], # West Virginia
                        WY => [ulsfo, eqiad, codfw], # Wyoming
                    },
                    CA => { # Canada
                        AB => [ulsfo, eqiad, codfw], # Alberta
                        BC => [ulsfo, eqiad, codfw], # British Columbia
                        MB => [       eqiad, codfw], # Manitoba
                        NB => [       eqiad, codfw], # New Brunswick
                        NL => [       eqiad, codfw], # Newfoundland
                        NS => [       eqiad, codfw], # Nova Scotia
                        NT => [ulsfo, eqiad, codfw], # Northwest Territories
                        NU => [       eqiad, codfw], # Nunavut
                        ON => [       eqiad, codfw], # Ontario
                        PE => [       eqiad, codfw], # Prince Edward Island
                        QC => [       eqiad, codfw], # Quebec
                        SK => [       eqiad, codfw], # Saskatchewan
                        YT => [ulsfo, eqiad, codfw], # Yukon Territory
                    },
                    MX => [       codfw, eqiad], # Mexico
                },
                OC      => [ulsfo, eqiad, codfw],
                default => [       eqiad, codfw],
            },
            nets = {
                # Wikimedia address space
                208.80.152.0/23   => [       codfw, eqiad], # codfw
                208.80.154.0/23   => [       eqiad, codfw], # eqiad
                91.198.174.0/24   => [esams, eqiad, codfw], # esams
                185.15.56.0/22    => [esams, eqiad, codfw], # esams
                198.35.26.0/23    => [ulsfo, eqiad, codfw], # ulsfo
                2620:0:860::/48   => [       codfw, eqiad], # codfw
                2620:0:861::/48   => [       eqiad, codfw], # eqiad
                2620:0:862::/48   => [       esams, eqiad], # esams
                2620:0:863::/48   => [ulsfo, eqiad, codfw], # ulsfo
                198.73.209.0/24   => [ulsfo, eqiad, codfw], # WMF OIT
                2620:62:c000::/48 => [ulsfo, eqiad, codfw], # WMF OIT
                # Level3's DNS clusters
                192.221.132.0/22  => [       eqiad, codfw], # Atlanta
                192.221.136.0/22  => [       eqiad, codfw], # Chicago
                192.221.140.0/22  => [       codfw, eqiad], # Dallas
                192.221.148.0/22  => [ulsfo, eqiad, codfw], # Los Angeles
                192.221.156.0/22  => [       eqiad, codfw], # New York
                192.221.160.0/22  => [ulsfo, eqiad, codfw], # San Jose
                192.221.164.0/22  => [       eqiad, codfw], # Washington, DC
                8.0.4.0/22        => [       eqiad, codfw], # Atlanta
                8.0.8.0/22        => [       eqiad, codfw], # Chicago
                8.0.12.0/22       => [       codfw, eqiad], # Dallas
                8.0.20.0/22       => [ulsfo, eqiad, codfw], # Los Angeles
                8.0.28.0/22       => [       eqiad, codfw], # New York
                8.0.32.0/22       => [ulsfo, eqiad, codfw], # San Jose
                8.0.36.0/22       => [       eqiad, codfw], # Washington, DC
            },
        },
    },
    resources => {
        text-addrs => {
            map => generic-map
            service_types => up
            dcmap => {
                eqiad => { addrs_v4 => 208.80.154.224, addrs_v6 => 2620:0:861:ed1a::1 }
                codfw => { addrs_v4 => 208.80.153.224, addrs_v6 => 2620:0:860:ed1a::1 }
                esams => { addrs_v4 => 91.198.174.192, addrs_v6 => 2620:0:862:ed1a::1 }
                ulsfo => { addrs_v4 => 198.35.26.96,   addrs_v6 => 2620:0:863:ed1a::1 }
            }
        }
        text-addrs-v4 => { # v4 from above, for e.g. donate and geoiplookup
            map => generic-map
            service_types => up
            dcmap => {
                eqiad => 208.80.154.224
                codfw => 208.80.153.224
                esams => 91.198.174.192
                ulsfo => 198.35.26.96
            }
        }
        upload-addrs => {
            map => generic-map
            service_types => up
            dcmap => {
                eqiad => { addrs_v4 => 208.80.154.240, addrs_v6 => 2620:0:861:ed1a::2:b }
                codfw => { addrs_v4 => 208.80.153.240, addrs_v6 => 2620:0:860:ed1a::2:b }
                esams => { addrs_v4 => 91.198.174.208, addrs_v6 => 2620:0:862:ed1a::2:b }
                ulsfo => { addrs_v4 => 198.35.26.112,  addrs_v6 => 2620:0:863:ed1a::2:b }
            }
        }
        mobile-addrs => {
            map => generic-map
            service_types => up
            dcmap => {
                eqiad => { addrs_v4 => 208.80.154.236, addrs_v6 => 2620:0:861:ed1a::1:c }
                codfw => { addrs_v4 => 208.80.153.236, addrs_v6 => 2620:0:860:ed1a::1:c }
                esams => { addrs_v4 => 91.198.174.204, addrs_v6 => 2620:0:862:ed1a::1:c }
                ulsfo => { addrs_v4 => 198.35.26.108,  addrs_v6 => 2620:0:863:ed1a::1:c }
            }
        }
    }
}}
